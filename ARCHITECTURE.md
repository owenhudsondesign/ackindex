# ğŸ—ï¸ AckIndex Architecture Diagram

## System Architecture Overview

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         USER INTERFACE                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚  â”‚  Public Dashboard â”‚              â”‚ Admin Dashboard  â”‚       â”‚
â”‚  â”‚      (/)          â”‚              â”‚    (/admin)      â”‚       â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤              â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤       â”‚
â”‚  â”‚ â€¢ Search          â”‚              â”‚ â€¢ Login          â”‚       â”‚
â”‚  â”‚ â€¢ Filter          â”‚              â”‚ â€¢ Upload PDF     â”‚       â”‚
â”‚  â”‚ â€¢ View Cards      â”‚              â”‚ â€¢ View History   â”‚       â”‚
â”‚  â”‚ â€¢ View Charts     â”‚              â”‚ â€¢ Status         â”‚       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â”‚           â”‚                                   â”‚                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚                                   â”‚
            â–¼                                   â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                       NEXT.JS APP LAYER                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚   API Routes        â”‚         â”‚   React Components   â”‚     â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤         â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤     â”‚
â”‚  â”‚ GET /api/entries    â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â€¢ EntryCard         â”‚     â”‚
â”‚  â”‚ POST /api/upload    â”‚         â”‚ â€¢ ChartBlock        â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚ â€¢ MetricChip        â”‚     â”‚
â”‚            â”‚                     â”‚ â€¢ SearchBar         â”‚     â”‚
â”‚            â”‚                     â”‚ â€¢ CategoryTabs      â”‚     â”‚
â”‚            â”‚                     â”‚ â€¢ UploadForm        â”‚     â”‚
â”‚            â”‚                     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚            â”‚                                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      PROCESSING LAYER                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  PDF Upload â”€â”€â–º Extract Text â”€â”€â–º AI Parse â”€â”€â–º Structure JSON  â”‚
â”‚      â”‚              â”‚                â”‚               â”‚          â”‚
â”‚      â”‚              â”‚                â”‚               â”‚          â”‚
â”‚  â”Œâ”€â”€â”€â–¼â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â–¼â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â–¼â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â–¼â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ Validateâ”‚    â”‚pdf-parseâ”‚      â”‚ Claude â”‚     â”‚  JSON  â”‚    â”‚
â”‚  â”‚  File  â”‚    â”‚         â”‚      â”‚  API   â”‚     â”‚ Output â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                      â–²                          â”‚
â”‚                                      â”‚                          â”‚
â”‚                                  Alternative:                   â”‚
â”‚                                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”                     â”‚
â”‚                                  â”‚ OpenAI â”‚                     â”‚
â”‚                                  â”‚  API   â”‚                     â”‚
â”‚                                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜                     â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      DATABASE LAYER                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚   PostgreSQL      â”‚           â”‚  Supabase Storage    â”‚     â”‚
â”‚  â”‚   (Supabase)      â”‚           â”‚                      â”‚     â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤           â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤     â”‚
â”‚  â”‚                   â”‚           â”‚                      â”‚     â”‚
â”‚  â”‚ entries           â”‚           â”‚ civic-documents/     â”‚     â”‚
â”‚  â”‚ â”œâ”€ id            â”‚           â”‚ â””â”€ *.pdf            â”‚     â”‚
â”‚  â”‚ â”œâ”€ title         â”‚           â”‚                      â”‚     â”‚
â”‚  â”‚ â”œâ”€ category      â”‚           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚  â”‚ â”œâ”€ summary       â”‚                                         â”‚
â”‚  â”‚ â”œâ”€ key_metrics   â”‚           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚ â”œâ”€ visualizationsâ”‚           â”‚  Authentication      â”‚     â”‚
â”‚  â”‚ â””â”€ ...           â”‚           â”‚  (Supabase Auth)     â”‚     â”‚
â”‚  â”‚                  â”‚           â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤     â”‚
â”‚  â”‚ Row Level        â”‚           â”‚ â€¢ Admin users        â”‚     â”‚
â”‚  â”‚ Security (RLS)   â”‚           â”‚ â€¢ Sessions           â”‚     â”‚
â”‚  â”‚                  â”‚           â”‚ â€¢ JWT tokens         â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Data Flow Diagram

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Admin     â”‚
â”‚  uploads    â”‚
â”‚    PDF      â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              UPLOAD PROCESSING PIPELINE                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”œâ”€â–º 1. Validate file (type, size)
       â”‚    â””â”€â–º PDF only, max 10MB
       â”‚
       â”œâ”€â–º 2. Extract text from PDF
       â”‚    â””â”€â–º pdf-parse library
       â”‚
       â”œâ”€â–º 3. Send to AI API
       â”‚    â”œâ”€â–º Claude 3.5 Sonnet (primary)
       â”‚    â””â”€â–º or OpenAI GPT-4o mini (alternative)
       â”‚
       â”œâ”€â–º 4. Parse response
       â”‚    â””â”€â–º Extract JSON structure
       â”‚
       â”œâ”€â–º 5. Store PDF in Supabase Storage
       â”‚    â””â”€â–º civic-documents/ bucket
       â”‚
       â””â”€â–º 6. Store structured data in database
            â””â”€â–º entries table
       
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  STORED IN DATABASE                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  {                                                      â”‚
â”‚    "title": "FY2026 Budget Proposal",                 â”‚
â”‚    "category": "Budget",                               â”‚
â”‚    "summary": "The budget proposes...",                â”‚
â”‚    "key_metrics": [...],                               â”‚
â”‚    "visualizations": [...]                             â”‚
â”‚  }                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              RENDERED ON PUBLIC DASHBOARD               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  ğŸ“‹ FY2026 Budget Proposal                    â”‚    â”‚
â”‚  â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€    â”‚    â”‚
â”‚  â”‚  Category: Budget  |  Source: Finance Dept   â”‚    â”‚
â”‚  â”‚                                                â”‚    â”‚
â”‚  â”‚  The budget proposes...                       â”‚    â”‚
â”‚  â”‚                                                â”‚    â”‚
â”‚  â”‚  ğŸ’° Total Budget: $128M                       â”‚    â”‚
â”‚  â”‚  ğŸ“ˆ Increase: 5.2%                            â”‚    â”‚
â”‚  â”‚                                                â”‚    â”‚
â”‚  â”‚  [Bar Chart showing FY24, FY25, FY26]        â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Component Hierarchy

```
App
â”‚
â”œâ”€â”€ Layout
â”‚   â”œâ”€â”€ Navigation
â”‚   â”‚   â”œâ”€â”€ Logo
â”‚   â”‚   â””â”€â”€ Admin Link
â”‚   â”‚
â”‚   â”œâ”€â”€ Main Content (children)
â”‚   â”‚
â”‚   â””â”€â”€ Footer
â”‚
â”œâ”€â”€ Home Page (/)
â”‚   â”œâ”€â”€ Hero Section
â”‚   â”œâ”€â”€ SearchBar
â”‚   â”œâ”€â”€ CategoryTabs
â”‚   â””â”€â”€ FeedGrid
â”‚       â””â”€â”€ EntryCard (multiple)
â”‚           â”œâ”€â”€ Header
â”‚           â”‚   â”œâ”€â”€ Title
â”‚           â”‚   â””â”€â”€ Tags
â”‚           â”œâ”€â”€ Summary (expandable)
â”‚           â”œâ”€â”€ MetricChip (multiple)
â”‚           â”œâ”€â”€ ChartBlock
â”‚           â”‚   â””â”€â”€ Recharts Component
â”‚           â””â”€â”€ Footer (metadata)
â”‚
â””â”€â”€ Admin Page (/admin)
    â”œâ”€â”€ Login Form (if not authenticated)
    â””â”€â”€ Dashboard (if authenticated)
        â”œâ”€â”€ UploadForm
        â”‚   â”œâ”€â”€ Title Input
        â”‚   â”œâ”€â”€ Category Select
        â”‚   â”œâ”€â”€ Source Input
        â”‚   â”œâ”€â”€ File Upload
        â”‚   â””â”€â”€ Submit Button
        â””â”€â”€ Upload History
            â””â”€â”€ History Item (multiple)
```

## Technology Stack Visualization

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      DEPLOYMENT                             â”‚
â”‚                    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                           â”‚
â”‚                       Vercel                                â”‚
â”‚                  (Edge Network)                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     FRONTEND                                â”‚
â”‚                   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                              â”‚
â”‚  Next.js 14  â”‚  React  â”‚  TypeScript                       â”‚
â”‚  Tailwind CSS  â”‚  Framer Motion  â”‚  Recharts               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    API LAYER                                â”‚
â”‚                  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                             â”‚
â”‚  Next.js API Routes  â”‚  Server Actions                     â”‚
â”‚  SWR (data fetching)  â”‚  Form handling                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                    â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”
                    â”‚         â”‚
          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”  â”Œâ”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
          â”‚ Supabase   â”‚  â”‚ AI APIs     â”‚
          â”‚            â”‚  â”‚             â”‚
          â”‚ PostgreSQL â”‚  â”‚ Claude      â”‚
          â”‚ Storage    â”‚  â”‚ 3.5 Sonnet  â”‚
          â”‚ Auth       â”‚  â”‚ or          â”‚
          â”‚            â”‚  â”‚ OpenAI      â”‚
          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ GPT-4o mini â”‚
                          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Request Flow: Viewing Dashboard

```
1. User visits https://ackindex.com
   â”‚
   â–¼
2. Next.js renders page.tsx
   â”‚
   â–¼
3. useFetchEntries() hook triggers
   â”‚
   â–¼
4. GET /api/entries
   â”‚
   â–¼
5. Supabase query: SELECT * FROM entries
   â”‚
   â–¼
6. Data returned as JSON
   â”‚
   â–¼
7. SWR caches result
   â”‚
   â–¼
8. React components render
   â”‚
   â”œâ”€â–º EntryCard components
   â”œâ”€â–º ChartBlock components
   â””â”€â–º MetricChip components
   â”‚
   â–¼
9. User sees beautiful dashboard âœ¨
```

## Request Flow: Uploading Document

```
1. Admin visits /admin
   â”‚
   â–¼
2. Authenticates with Supabase
   â”‚
   â–¼
3. Fills form and uploads PDF
   â”‚
   â–¼
4. POST /api/upload with multipart form data
   â”‚
   â–¼
5. Server validates file
   â”‚ â”œâ”€â–º Check file type (PDF)
   â”‚ â””â”€â–º Check file size (<10MB)
   â”‚
   â–¼
6. Extract text with pdf-parse
   â”‚
   â–¼
7. Send to Claude API
   â”‚ â”œâ”€â–º System prompt (parsing instructions)
   â”‚ â””â”€â–º Document text
   â”‚
   â–¼
8. Claude returns structured JSON
   â”‚ â”œâ”€â–º title, category, summary
   â”‚ â”œâ”€â–º key_metrics array
   â”‚ â””â”€â–º visualizations array
   â”‚
   â–¼
9. Store PDF in Supabase Storage
   â”‚
   â–¼
10. Store JSON in database
    â”‚
    â–¼
11. Return success to client
    â”‚
    â–¼
12. Admin sees success message âœ…
    â”‚
    â–¼
13. Public dashboard auto-updates ğŸ”„
```

## Security Layers

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         Frontend Validation                 â”‚
â”‚  â€¢ File type check                          â”‚
â”‚  â€¢ File size limit                          â”‚
â”‚  â€¢ Input sanitization                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         API Route Protection                â”‚
â”‚  â€¢ Authentication check                     â”‚
â”‚  â€¢ Rate limiting                            â”‚
â”‚  â€¢ Request validation                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚        Database Security (RLS)              â”‚
â”‚  â€¢ Row Level Security policies              â”‚
â”‚  â€¢ Public read access                       â”‚
â”‚  â€¢ Authenticated write access               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚        Environment Protection               â”‚
â”‚  â€¢ API keys in env variables                â”‚
â”‚  â€¢ Service role key separation              â”‚
â”‚  â€¢ CORS configuration                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Deployment Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      PRODUCTION                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                  â”‚                  â”‚
        â–¼                  â–¼                  â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Vercel     â”‚  â”‚  Supabase    â”‚  â”‚  Claude API  â”‚
â”‚   (App)      â”‚  â”‚  (Database)  â”‚  â”‚  (AI)        â”‚
â”‚              â”‚  â”‚              â”‚  â”‚              â”‚
â”‚ â€¢ Next.js    â”‚  â”‚ â€¢ PostgreSQL â”‚  â”‚ â€¢ Parsing    â”‚
â”‚ â€¢ SSR/SSG    â”‚  â”‚ â€¢ Storage    â”‚  â”‚ â€¢ Structured â”‚
â”‚ â€¢ Edge       â”‚  â”‚ â€¢ Auth       â”‚  â”‚   Output     â”‚
â”‚ â€¢ API Routes â”‚  â”‚ â€¢ RLS        â”‚  â”‚              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚                  â”‚                  â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                           â–¼
                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                  â”‚    Users     â”‚
                  â”‚  (Citizens)  â”‚
                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## File Organization

```
ackindex-app/
â”‚
â”œâ”€â”€ ğŸ“± app/                    # Next.js app directory
â”‚   â”œâ”€â”€ layout.tsx             # Root layout
â”‚   â”œâ”€â”€ page.tsx               # Home page
â”‚   â”œâ”€â”€ globals.css            # Global styles
â”‚   â”œâ”€â”€ ğŸ” admin/              # Admin section
â”‚   â”‚   â””â”€â”€ page.tsx           # Admin dashboard
â”‚   â””â”€â”€ ğŸ”Œ api/                # API routes
â”‚       â”œâ”€â”€ entries/           # GET entries
â”‚       â””â”€â”€ upload/            # POST upload
â”‚
â”œâ”€â”€ ğŸ§© components/             # React components
â”‚   â”œâ”€â”€ EntryCard.tsx          # Main content card
â”‚   â”œâ”€â”€ ChartBlock.tsx         # Chart renderer
â”‚   â”œâ”€â”€ MetricChip.tsx         # Metric display
â”‚   â”œâ”€â”€ SearchBar.tsx          # Search input
â”‚   â”œâ”€â”€ CategoryTabs.tsx       # Category filter
â”‚   â”œâ”€â”€ FeedGrid.tsx           # Grid layout
â”‚   â””â”€â”€ UploadForm.tsx         # Upload interface
â”‚
â”œâ”€â”€ ğŸª hooks/                  # Custom hooks
â”‚   â””â”€â”€ useEntries.ts          # Data fetching
â”‚
â”œâ”€â”€ ğŸ“š lib/                    # Utilities
â”‚   â”œâ”€â”€ supabase.ts            # DB client
â”‚   â”œâ”€â”€ ai-parser.ts           # AI integration
â”‚   â””â”€â”€ pdf-utils.ts           # PDF processing
â”‚
â”œâ”€â”€ ğŸ“ types/                  # TypeScript types
â”‚   â””â”€â”€ index.ts               # Type definitions
â”‚
â”œâ”€â”€ âš™ï¸ Config files
â”‚   â”œâ”€â”€ package.json           # Dependencies
â”‚   â”œâ”€â”€ tsconfig.json          # TypeScript
â”‚   â”œâ”€â”€ tailwind.config.js     # Tailwind
â”‚   â””â”€â”€ next.config.js         # Next.js
â”‚
â””â”€â”€ ğŸ“– Documentation
    â”œâ”€â”€ README.md              # Main docs
    â”œâ”€â”€ QUICKSTART.md          # Setup guide
    â”œâ”€â”€ DEPLOYMENT.md          # Deploy guide
    â”œâ”€â”€ API.md                 # API reference
    â””â”€â”€ SAMPLE_DATA.md         # Test data
```

---

This architecture provides:
- ğŸš€ **Performance**: Edge deployment, efficient caching
- ğŸ”’ **Security**: Multi-layer protection, RLS policies
- ğŸ“ˆ **Scalability**: Serverless functions, CDN distribution
- ğŸ¨ **Maintainability**: Clear separation of concerns
- ğŸ’ª **Reliability**: Type safety, error handling
